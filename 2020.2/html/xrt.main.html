<!DOCTYPE html>
<html class="writer-html4" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
<!-- OneTrust Cookies Consent Notice start for xilinx.github.io -->

<script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" data-document-language="true" type="text/javascript" charset="UTF-8" data-domain-script="03af8d57-0a04-47a6-8f10-322fa00d8fc7" ></script>
<script type="text/javascript">
function OptanonWrapper() { }
</script>
<!-- OneTrust Cookies Consent Notice end for xilinx.github.io -->
  <title>XRT Core Library &mdash; XRT 2020.2 documentation</title><link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/_static/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Embedded Runtime Library" href="ert.main.html" />
    <link rel="prev" title="Binary Formats" href="formats.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
            <a href="index.html" class="icon icon-home"> XRT<img src="_static/xilinx-header-logo.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                2020.2
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="platforms.html">XRT and Vitis™ Platform Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="system_requirements.html">System Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="build.html">Building the XRT Software Stack</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">XRT Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="test.html">Developer Build and Test Instructions</a></li>
</ul>
<p class="caption"><span class="caption-text">Use Model and Features</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="execution-model.html">Execution Model Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="xrt_kernel_executions.html">Supported Kernel Execution Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="multiprocess.html">Multi-Process Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="p2p.html">PCIe Peer-to-Peer (P2P)</a></li>
<li class="toctree-l1"><a class="reference internal" href="m2m.html">Memory-to-Memory (M2M)</a></li>
<li class="toctree-l1"><a class="reference internal" href="sb.html">PCIe Slave-Bridge (SB)</a></li>
<li class="toctree-l1"><a class="reference internal" href="xrt_ini.html">Configuration File xrt.ini</a></li>
</ul>
<p class="caption"><span class="caption-text">Video Acceleration Using XMA</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="xma_user_guide.html">Xilinx Media Accelerator (XMA)</a></li>
<li class="toctree-l1"><a class="reference internal" href="xma_19.2.html">XMA 19.2 Migration</a></li>
</ul>
<p class="caption"><span class="caption-text">User API Library</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="opencl_extension.html">Xilinx OpenCL extension</a></li>
<li class="toctree-l1"><a class="reference internal" href="xrt_native_apis.html">XRT Native APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="xrt_native.main.html">XRT Native Library C++ API</a></li>
<li class="toctree-l1"><a class="reference internal" href="xrt_native.main.html#id1">XRT Native Library C API</a></li>
<li class="toctree-l1"><a class="reference internal" href="xma.main.html">XMA Core Library</a></li>
</ul>
<p class="caption"><span class="caption-text">XRT Developer's Space</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="platforms_partitions.html">Alveo™ Platform Loading Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="sysfs.html">Linux Sys FileSystem Nodes</a></li>
<li class="toctree-l1"><a class="reference internal" href="formats.html">Binary Formats</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">XRT Core Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="ert.main.html">Embedded Runtime Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="mgmt-ioctl.main.html">XCLMGMT (PCIe Management Physical Function) Driver Interfaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="xocl_ioctl.main.html">XOCL (PCIe User Physical Function) Driver Interfaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="zocl_ioctl.main.html">ZOCL Driver Interfaces</a></li>
</ul>
<p class="caption"><span class="caption-text">Tools and Utilities</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="xclbintools.html">xclbinutil</a></li>
<li class="toctree-l1"><a class="reference internal" href="xbutil.html">xbutil</a></li>
<li class="toctree-l1"><a class="reference internal" href="xbmgmt.html">xbmgmt</a></li>
<li class="toctree-l1"><a class="reference internal" href="xbutil2.html">Xbutil Next Generation</a></li>
<li class="toctree-l1"><a class="reference internal" href="xbmgmt2.html">Xbmgmt Next Generation</a></li>
</ul>
<p class="caption"><span class="caption-text">Building Platforms</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="yocto.html">XRT Setup for Embedded Flow</a></li>
<li class="toctree-l1"><a class="reference internal" href="test.html">Developer Build and Test Instructions</a></li>
</ul>
<p class="caption"><span class="caption-text">Cloud Support</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="mailbox.main.html">Mailbox Subdevice Driver</a></li>
<li class="toctree-l1"><a class="reference internal" href="mailbox.proto.html">Mailbox Inter-domain Communication Protocol</a></li>
<li class="toctree-l1"><a class="reference internal" href="cloud_vendor_support.html">MSD/MPD and Plugins</a></li>
</ul>
<p class="caption"><span class="caption-text">Security</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="security.html">Security of Alveo Platform</a></li>
</ul>
<p class="caption"><span class="caption-text">Debug and Faqs</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="debug-faq.html">XRT/Board Debug FAQ</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: black" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">XRT</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>XRT Core Library</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/xrt.main.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="xrt-core-library">
<span id="xrt-main-rst"></span><h1>XRT Core Library<a class="headerlink" href="#xrt-core-library" title="Permalink to this headline">¶</a></h1>
<p><strong>Xilinx Runtime (XRT) Library Interface Definitions</strong></p>
<p>Header file <em>xrt.h</em> defines data structures and function signatures
exported by Xilinx Runtime (XRT) Library. XRT is part of software
stack which is integrated into Xilinx reference platform.</p>
<dl class="type">
<dt id="c.xclDeviceHandle">
typedef <code class="descname">xclDeviceHandle</code><a class="headerlink" href="#c.xclDeviceHandle" title="Permalink to this definition">¶</a></dt>
<dd><p>opaque device handle</p>
</dd></dl>

<p><strong>Description</strong></p>
<p>A device handle of xclDeviceHandle kind is obtained by opening a
device. Clients pass this device handle to refer to the opened
device in all future interaction with XRT.</p>
<p><strong>XRT Device Management APIs</strong></p>
<hr class="docutils" />
<dl class="function">
<dt id="c.xclProbe">
XCL_DRIVER_DLLESPEC unsigned int <code class="descname">xclProbe</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#c.xclProbe" title="Permalink to this definition">¶</a></dt>
<dd><p>Enumerate devices found in the system</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<p><strong>Return</strong></p>
<p>count of devices found</p>
<dl class="function">
<dt id="c.xclOpen">
XCL_DRIVER_DLLESPEC <a class="reference internal" href="#c.xclDeviceHandle" title="xclDeviceHandle">xclDeviceHandle</a> <code class="descname">xclOpen</code><span class="sig-paren">(</span>unsigned int<em>&nbsp;deviceIndex</em>, const char *<em>&nbsp;logFileName</em>, enum xclVerbosityLevel<em>&nbsp;level</em><span class="sig-paren">)</span><a class="headerlink" href="#c.xclOpen" title="Permalink to this definition">¶</a></dt>
<dd><p>Open a device and obtain its handle.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">unsigned</span> <span class="pre">int</span> <span class="pre">deviceIndex</span></code></dt>
<dd>Slot number of device 0 for first device, 1 for the second device…</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">char</span> <span class="pre">*</span> <span class="pre">logFileName</span></code></dt>
<dd>Log file to use for optional logging</dd>
<dt><code class="docutils literal notranslate"><span class="pre">enum</span> <span class="pre">xclVerbosityLevel</span> <span class="pre">level</span></code></dt>
<dd>Severity level of messages to log</dd>
</dl>
<p><strong>Return</strong></p>
<p>Device handle</p>
<dl class="function">
<dt id="c.xclClose">
XCL_DRIVER_DLLESPEC void <code class="descname">xclClose</code><span class="sig-paren">(</span><a class="reference internal" href="#c.xclDeviceHandle" title="xclDeviceHandle">xclDeviceHandle</a><em>&nbsp;handle</em><span class="sig-paren">)</span><a class="headerlink" href="#c.xclClose" title="Permalink to this definition">¶</a></dt>
<dd><p>Close an opened device</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">xclDeviceHandle</span> <span class="pre">handle</span></code></dt>
<dd>Device handle</dd>
</dl>
<dl class="function">
<dt id="c.xclGetDeviceInfo2">
XCL_DRIVER_DLLESPEC int <code class="descname">xclGetDeviceInfo2</code><span class="sig-paren">(</span><a class="reference internal" href="#c.xclDeviceHandle" title="xclDeviceHandle">xclDeviceHandle</a><em>&nbsp;handle</em>, struct xclDeviceInfo2 *<em>&nbsp;info</em><span class="sig-paren">)</span><a class="headerlink" href="#c.xclGetDeviceInfo2" title="Permalink to this definition">¶</a></dt>
<dd><p>Obtain various bits of information from the device</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">xclDeviceHandle</span> <span class="pre">handle</span></code></dt>
<dd>Device handle</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">xclDeviceInfo2</span> <span class="pre">*</span> <span class="pre">info</span></code></dt>
<dd>Information record</dd>
</dl>
<p><strong>Return</strong></p>
<p>0 on success or appropriate error number</p>
<dl class="function">
<dt id="c.xclGetUsageInfo">
XCL_DRIVER_DLLESPEC int <code class="descname">xclGetUsageInfo</code><span class="sig-paren">(</span><a class="reference internal" href="#c.xclDeviceHandle" title="xclDeviceHandle">xclDeviceHandle</a><em>&nbsp;handle</em>, struct xclDeviceUsage *<em>&nbsp;info</em><span class="sig-paren">)</span><a class="headerlink" href="#c.xclGetUsageInfo" title="Permalink to this definition">¶</a></dt>
<dd><p>Obtain usage information from the device</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">xclDeviceHandle</span> <span class="pre">handle</span></code></dt>
<dd>Device handle</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">xclDeviceUsage</span> <span class="pre">*</span> <span class="pre">info</span></code></dt>
<dd>Information record</dd>
</dl>
<p><strong>Return</strong></p>
<p>0 on success or appropriate error number</p>
<dl class="function">
<dt id="c.xclGetErrorStatus">
XCL_DRIVER_DLLESPEC int <code class="descname">xclGetErrorStatus</code><span class="sig-paren">(</span><a class="reference internal" href="#c.xclDeviceHandle" title="xclDeviceHandle">xclDeviceHandle</a><em>&nbsp;handle</em>, struct xclErrorStatus *<em>&nbsp;info</em><span class="sig-paren">)</span><a class="headerlink" href="#c.xclGetErrorStatus" title="Permalink to this definition">¶</a></dt>
<dd><p>Obtain error information from the device</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">xclDeviceHandle</span> <span class="pre">handle</span></code></dt>
<dd>Device handle</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">xclErrorStatus</span> <span class="pre">*</span> <span class="pre">info</span></code></dt>
<dd>Information record</dd>
</dl>
<p><strong>Return</strong></p>
<p>0 on success or appropriate error number</p>
<dl class="function">
<dt id="c.xclLoadXclBin">
XCL_DRIVER_DLLESPEC int <code class="descname">xclLoadXclBin</code><span class="sig-paren">(</span><a class="reference internal" href="#c.xclDeviceHandle" title="xclDeviceHandle">xclDeviceHandle</a><em>&nbsp;handle</em>, const struct axlf *<em>&nbsp;buffer</em><span class="sig-paren">)</span><a class="headerlink" href="#c.xclLoadXclBin" title="Permalink to this definition">¶</a></dt>
<dd><p>Download FPGA image (xclbin) to the device</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">xclDeviceHandle</span> <span class="pre">handle</span></code></dt>
<dd>Device handle</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">struct</span> <span class="pre">axlf</span> <span class="pre">*</span> <span class="pre">buffer</span></code></dt>
<dd>Pointer to device image (xclbin) in memory</dd>
</dl>
<p><strong>Return</strong></p>
<p>0 on success or appropriate error number</p>
<p>Download FPGA image (AXLF) to the device. The PR bitstream is
encapsulated inside xclbin as a section. xclbin may also contains
other sections which are suitably handled by the driver.</p>
<dl class="function">
<dt id="c.xclGetSectionInfo">
XCL_DRIVER_DLLESPEC int <code class="descname">xclGetSectionInfo</code><span class="sig-paren">(</span><a class="reference internal" href="#c.xclDeviceHandle" title="xclDeviceHandle">xclDeviceHandle</a><em>&nbsp;handle</em>, void *<em>&nbsp;info</em>, size_t *<em>&nbsp;size</em>, enum axlf_section_kind<em>&nbsp;kind</em>, int<em>&nbsp;index</em><span class="sig-paren">)</span><a class="headerlink" href="#c.xclGetSectionInfo" title="Permalink to this definition">¶</a></dt>
<dd><p>Get Information from sysfs about the downloaded xclbin sections</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">xclDeviceHandle</span> <span class="pre">handle</span></code></dt>
<dd>Device handle</dd>
<dt><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">*</span> <span class="pre">info</span></code></dt>
<dd>Pointer to preallocated memory which will store the return value.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">size_t</span> <span class="pre">*</span> <span class="pre">size</span></code></dt>
<dd>Pointer to preallocated memory which will store the return size.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">enum</span> <span class="pre">axlf_section_kind</span> <span class="pre">kind</span></code></dt>
<dd>axlf_section_kind for which info is being queried</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">index</span></code></dt>
<dd>The (sub)section index for the “kind” type.</dd>
</dl>
<p><strong>Return</strong></p>
<p>0 on success or appropriate error number</p>
<p>Get the section information from sysfs. The index corrresponds to the (section) entry
of the axlf_section_kind data being queried. The info and the size contain the return
binary value of the subsection and its size.</p>
<dl class="function">
<dt id="c.xclReClock2">
XCL_DRIVER_DLLESPEC int <code class="descname">xclReClock2</code><span class="sig-paren">(</span><a class="reference internal" href="#c.xclDeviceHandle" title="xclDeviceHandle">xclDeviceHandle</a><em>&nbsp;handle</em>, unsigned short<em>&nbsp;region</em>, const unsigned short *<em>&nbsp;targetFreqMHz</em><span class="sig-paren">)</span><a class="headerlink" href="#c.xclReClock2" title="Permalink to this definition">¶</a></dt>
<dd><p>Configure PR region frequncies</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">xclDeviceHandle</span> <span class="pre">handle</span></code></dt>
<dd>Device handle</dd>
<dt><code class="docutils literal notranslate"><span class="pre">unsigned</span> <span class="pre">short</span> <span class="pre">region</span></code></dt>
<dd>PR region (always 0)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">unsigned</span> <span class="pre">short</span> <span class="pre">*</span> <span class="pre">targetFreqMHz</span></code></dt>
<dd>Array of target frequencies in order for the Clock Wizards driving
the PR region</dd>
</dl>
<p><strong>Return</strong></p>
<p>0 on success or appropriate error number</p>
<dl class="function">
<dt id="c.xclOpenContext">
XCL_DRIVER_DLLESPEC int <code class="descname">xclOpenContext</code><span class="sig-paren">(</span><a class="reference internal" href="#c.xclDeviceHandle" title="xclDeviceHandle">xclDeviceHandle</a><em>&nbsp;handle</em>, const xuid_t<em>&nbsp;xclbinId</em>, unsigned int<em>&nbsp;ipIndex</em>, bool<em>&nbsp;shared</em><span class="sig-paren">)</span><a class="headerlink" href="#c.xclOpenContext" title="Permalink to this definition">¶</a></dt>
<dd><p>Create shared/exclusive context on compute units</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">xclDeviceHandle</span> <span class="pre">handle</span></code></dt>
<dd>Device handle</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">xuid_t</span> <span class="pre">xclbinId</span></code></dt>
<dd>UUID of the xclbin image running on the device</dd>
<dt><code class="docutils literal notranslate"><span class="pre">unsigned</span> <span class="pre">int</span> <span class="pre">ipIndex</span></code></dt>
<dd>IP index</dd>
<dt><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">shared</span></code></dt>
<dd>Shared access or exclusive access</dd>
</dl>
<p><strong>Return</strong></p>
<p>0 on success or appropriate error number</p>
<p>The context is necessary before submitting execution jobs using
<a class="reference internal" href="#c.xclExecBuf" title="xclExecBuf"><code class="xref c c-func docutils literal notranslate"><span class="pre">xclExecBuf()</span></code></a>. Contexts may be exclusive or shared. Allocation of
exclusive contexts on a hardware IP would succeed only if another
client has not already setup up a context on that hardware IP.
Shared contexts can be concurrently allocated by many
processes on the same compute units.</p>
<dl class="function">
<dt id="c.xclCloseContext">
XCL_DRIVER_DLLESPEC int <code class="descname">xclCloseContext</code><span class="sig-paren">(</span><a class="reference internal" href="#c.xclDeviceHandle" title="xclDeviceHandle">xclDeviceHandle</a><em>&nbsp;handle</em>, const xuid_t<em>&nbsp;xclbinId</em>, unsigned int<em>&nbsp;ipIndex</em><span class="sig-paren">)</span><a class="headerlink" href="#c.xclCloseContext" title="Permalink to this definition">¶</a></dt>
<dd><p>Close previously opened context</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">xclDeviceHandle</span> <span class="pre">handle</span></code></dt>
<dd>Device handle</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">xuid_t</span> <span class="pre">xclbinId</span></code></dt>
<dd>UUID of the xclbin image running on the device</dd>
<dt><code class="docutils literal notranslate"><span class="pre">unsigned</span> <span class="pre">int</span> <span class="pre">ipIndex</span></code></dt>
<dd>ipIndex</dd>
</dl>
<p><strong>Return</strong></p>
<p>0 on success or appropriate error number</p>
<p>Close a previously allocated shared/exclusive context for a hardware IP.</p>
<dl class="function">
<dt id="c.xclLogMsg">
XCL_DRIVER_DLLESPEC int <code class="descname">xclLogMsg</code><span class="sig-paren">(</span><a class="reference internal" href="#c.xclDeviceHandle" title="xclDeviceHandle">xclDeviceHandle</a><em>&nbsp;handle</em>, enum xrtLogMsgLevel<em>&nbsp;level</em>, const char *<em>&nbsp;tag</em>, const char *<em>&nbsp;format</em>, ...<span class="sig-paren">)</span><a class="headerlink" href="#c.xclLogMsg" title="Permalink to this definition">¶</a></dt>
<dd><p>Send message to log file as per settings in ini file.</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">xclDeviceHandle</span> <span class="pre">handle</span></code></dt>
<dd>Device handle</dd>
<dt><code class="docutils literal notranslate"><span class="pre">enum</span> <span class="pre">xrtLogMsgLevel</span> <span class="pre">level</span></code></dt>
<dd>Severity level of the msg</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">char</span> <span class="pre">*</span> <span class="pre">tag</span></code></dt>
<dd>Tag supplied by the client, like “OCL”, “XMA”, etc.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">char</span> <span class="pre">*</span> <span class="pre">format</span></code></dt>
<dd>Format of Msg string to write to log file</dd>
<dt><code class="docutils literal notranslate"><span class="pre">...</span></code></dt>
<dd>All other arguments as per the format</dd>
</dl>
<p><strong>Return</strong></p>
<p>0 on success or appropriate error number</p>
<p><strong>XRT Buffer Management APIs</strong></p>
<hr class="docutils" />
<p>Buffer management APIs are used for managing device memory and migrating buffers
between host and device memory</p>
<dl class="function">
<dt id="c.xclAllocBO">
XCL_DRIVER_DLLESPEC xclBufferHandle <code class="descname">xclAllocBO</code><span class="sig-paren">(</span><a class="reference internal" href="#c.xclDeviceHandle" title="xclDeviceHandle">xclDeviceHandle</a><em>&nbsp;handle</em>, size_t<em>&nbsp;size</em>, int<em>&nbsp;unused</em>, unsigned int<em>&nbsp;flags</em><span class="sig-paren">)</span><a class="headerlink" href="#c.xclAllocBO" title="Permalink to this definition">¶</a></dt>
<dd><p>Allocate a BO of requested size with appropriate flags</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">xclDeviceHandle</span> <span class="pre">handle</span></code></dt>
<dd>Device handle</dd>
<dt><code class="docutils literal notranslate"><span class="pre">size_t</span> <span class="pre">size</span></code></dt>
<dd>Size of buffer</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">unused</span></code></dt>
<dd>This argument is ignored</dd>
<dt><code class="docutils literal notranslate"><span class="pre">unsigned</span> <span class="pre">int</span> <span class="pre">flags</span></code></dt>
<dd>Specify bank information, etc</dd>
</dl>
<p><strong>Return</strong></p>
<p>BO handle</p>
<dl class="function">
<dt id="c.xclAllocUserPtrBO">
XCL_DRIVER_DLLESPEC xclBufferHandle <code class="descname">xclAllocUserPtrBO</code><span class="sig-paren">(</span><a class="reference internal" href="#c.xclDeviceHandle" title="xclDeviceHandle">xclDeviceHandle</a><em>&nbsp;handle</em>, void *<em>&nbsp;userptr</em>, size_t<em>&nbsp;size</em>, unsigned int<em>&nbsp;flags</em><span class="sig-paren">)</span><a class="headerlink" href="#c.xclAllocUserPtrBO" title="Permalink to this definition">¶</a></dt>
<dd><p>Allocate a BO using userptr provided by the user</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">xclDeviceHandle</span> <span class="pre">handle</span></code></dt>
<dd>Device handle</dd>
<dt><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">*</span> <span class="pre">userptr</span></code></dt>
<dd>Pointer to 4K aligned user memory</dd>
<dt><code class="docutils literal notranslate"><span class="pre">size_t</span> <span class="pre">size</span></code></dt>
<dd>Size of buffer</dd>
<dt><code class="docutils literal notranslate"><span class="pre">unsigned</span> <span class="pre">int</span> <span class="pre">flags</span></code></dt>
<dd>Specify bank information, etc</dd>
</dl>
<p><strong>Return</strong></p>
<p>BO handle</p>
<dl class="function">
<dt id="c.xclFreeBO">
XCL_DRIVER_DLLESPEC void <code class="descname">xclFreeBO</code><span class="sig-paren">(</span><a class="reference internal" href="#c.xclDeviceHandle" title="xclDeviceHandle">xclDeviceHandle</a><em>&nbsp;handle</em>, xclBufferHandle<em>&nbsp;boHandle</em><span class="sig-paren">)</span><a class="headerlink" href="#c.xclFreeBO" title="Permalink to this definition">¶</a></dt>
<dd><p>Free a previously allocated BO</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">xclDeviceHandle</span> <span class="pre">handle</span></code></dt>
<dd>Device handle</dd>
<dt><code class="docutils literal notranslate"><span class="pre">xclBufferHandle</span> <span class="pre">boHandle</span></code></dt>
<dd>BO handle</dd>
</dl>
<dl class="function">
<dt id="c.xclWriteBO">
XCL_DRIVER_DLLESPEC size_t <code class="descname">xclWriteBO</code><span class="sig-paren">(</span><a class="reference internal" href="#c.xclDeviceHandle" title="xclDeviceHandle">xclDeviceHandle</a><em>&nbsp;handle</em>, xclBufferHandle<em>&nbsp;boHandle</em>, const void *<em>&nbsp;src</em>, size_t<em>&nbsp;size</em>, size_t<em>&nbsp;seek</em><span class="sig-paren">)</span><a class="headerlink" href="#c.xclWriteBO" title="Permalink to this definition">¶</a></dt>
<dd><p>Copy-in user data to host backing storage of BO</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">xclDeviceHandle</span> <span class="pre">handle</span></code></dt>
<dd>Device handle</dd>
<dt><code class="docutils literal notranslate"><span class="pre">xclBufferHandle</span> <span class="pre">boHandle</span></code></dt>
<dd>BO handle</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">void</span> <span class="pre">*</span> <span class="pre">src</span></code></dt>
<dd>Source data pointer</dd>
<dt><code class="docutils literal notranslate"><span class="pre">size_t</span> <span class="pre">size</span></code></dt>
<dd>Size of data to copy</dd>
<dt><code class="docutils literal notranslate"><span class="pre">size_t</span> <span class="pre">seek</span></code></dt>
<dd>Offset within the BO</dd>
</dl>
<p><strong>Return</strong></p>
<p>0 on success or appropriate error number</p>
<p>Copy host buffer contents to previously allocated device
memory. <code class="docutils literal notranslate"><span class="pre">seek</span></code> specifies how many bytes to skip at the beginning
of the BO before copying-in <code class="docutils literal notranslate"><span class="pre">size</span></code> bytes of host buffer.</p>
<dl class="function">
<dt id="c.xclReadBO">
XCL_DRIVER_DLLESPEC size_t <code class="descname">xclReadBO</code><span class="sig-paren">(</span><a class="reference internal" href="#c.xclDeviceHandle" title="xclDeviceHandle">xclDeviceHandle</a><em>&nbsp;handle</em>, xclBufferHandle<em>&nbsp;boHandle</em>, void *<em>&nbsp;dst</em>, size_t<em>&nbsp;size</em>, size_t<em>&nbsp;skip</em><span class="sig-paren">)</span><a class="headerlink" href="#c.xclReadBO" title="Permalink to this definition">¶</a></dt>
<dd><p>Copy-out user data from host backing storage of BO</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">xclDeviceHandle</span> <span class="pre">handle</span></code></dt>
<dd>Device handle</dd>
<dt><code class="docutils literal notranslate"><span class="pre">xclBufferHandle</span> <span class="pre">boHandle</span></code></dt>
<dd>BO handle</dd>
<dt><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">*</span> <span class="pre">dst</span></code></dt>
<dd>Destination data pointer</dd>
<dt><code class="docutils literal notranslate"><span class="pre">size_t</span> <span class="pre">size</span></code></dt>
<dd>Size of data to copy</dd>
<dt><code class="docutils literal notranslate"><span class="pre">size_t</span> <span class="pre">skip</span></code></dt>
<dd>Offset within the BO</dd>
</dl>
<p><strong>Return</strong></p>
<p>0 on success or appropriate error number</p>
<p>Copy contents of previously allocated device memory to host
buffer. <code class="docutils literal notranslate"><span class="pre">skip</span></code> specifies how many bytes to skip from the
beginning of the BO before copying-out <code class="docutils literal notranslate"><span class="pre">size</span></code> bytes of device
buffer.</p>
<dl class="function">
<dt id="c.xclMapBO">
XCL_DRIVER_DLLESPEC void* <code class="descname">xclMapBO</code><span class="sig-paren">(</span><a class="reference internal" href="#c.xclDeviceHandle" title="xclDeviceHandle">xclDeviceHandle</a><em>&nbsp;handle</em>, xclBufferHandle<em>&nbsp;boHandle</em>, bool<em>&nbsp;write</em><span class="sig-paren">)</span><a class="headerlink" href="#c.xclMapBO" title="Permalink to this definition">¶</a></dt>
<dd><p>Memory map BO into user’s address space</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">xclDeviceHandle</span> <span class="pre">handle</span></code></dt>
<dd>Device handle</dd>
<dt><code class="docutils literal notranslate"><span class="pre">xclBufferHandle</span> <span class="pre">boHandle</span></code></dt>
<dd>BO handle</dd>
<dt><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">write</span></code></dt>
<dd>READ only or READ/WRITE mapping</dd>
</dl>
<p><strong>Return</strong></p>
<p>Memory mapped buffer</p>
<p>Map the contents of the buffer object into host memory
To unmap the buffer call <a class="reference internal" href="#c.xclUnmapBO" title="xclUnmapBO"><code class="xref c c-func docutils literal notranslate"><span class="pre">xclUnmapBO()</span></code></a>.</p>
<dl class="function">
<dt id="c.xclUnmapBO">
XCL_DRIVER_DLLESPEC int <code class="descname">xclUnmapBO</code><span class="sig-paren">(</span><a class="reference internal" href="#c.xclDeviceHandle" title="xclDeviceHandle">xclDeviceHandle</a><em>&nbsp;handle</em>, xclBufferHandle<em>&nbsp;boHandle</em>, void *<em>&nbsp;addr</em><span class="sig-paren">)</span><a class="headerlink" href="#c.xclUnmapBO" title="Permalink to this definition">¶</a></dt>
<dd><p>Unmap a BO that was previously mapped with xclMapBO</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">xclDeviceHandle</span> <span class="pre">handle</span></code></dt>
<dd>Device handle</dd>
<dt><code class="docutils literal notranslate"><span class="pre">xclBufferHandle</span> <span class="pre">boHandle</span></code></dt>
<dd>BO handle</dd>
<dt><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">*</span> <span class="pre">addr</span></code></dt>
<dd>The mapped void * pointer returned from <a class="reference internal" href="#c.xclMapBO" title="xclMapBO"><code class="xref c c-func docutils literal notranslate"><span class="pre">xclMapBO()</span></code></a></dd>
</dl>
<dl class="function">
<dt id="c.xclSyncBO">
XCL_DRIVER_DLLESPEC int <code class="descname">xclSyncBO</code><span class="sig-paren">(</span><a class="reference internal" href="#c.xclDeviceHandle" title="xclDeviceHandle">xclDeviceHandle</a><em>&nbsp;handle</em>, xclBufferHandle<em>&nbsp;boHandle</em>, enum xclBOSyncDirection<em>&nbsp;dir</em>, size_t<em>&nbsp;size</em>, size_t<em>&nbsp;offset</em><span class="sig-paren">)</span><a class="headerlink" href="#c.xclSyncBO" title="Permalink to this definition">¶</a></dt>
<dd><p>Synchronize buffer contents in requested direction</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">xclDeviceHandle</span> <span class="pre">handle</span></code></dt>
<dd>Device handle</dd>
<dt><code class="docutils literal notranslate"><span class="pre">xclBufferHandle</span> <span class="pre">boHandle</span></code></dt>
<dd>BO handle</dd>
<dt><code class="docutils literal notranslate"><span class="pre">enum</span> <span class="pre">xclBOSyncDirection</span> <span class="pre">dir</span></code></dt>
<dd>To device or from device</dd>
<dt><code class="docutils literal notranslate"><span class="pre">size_t</span> <span class="pre">size</span></code></dt>
<dd>Size of data to synchronize</dd>
<dt><code class="docutils literal notranslate"><span class="pre">size_t</span> <span class="pre">offset</span></code></dt>
<dd>Offset within the BO</dd>
</dl>
<p><strong>Return</strong></p>
<p>0 on success or standard errno</p>
<p>Synchronize the buffer contents between host and device. Depending
on the memory model this may require DMA to/from device or CPU
cache flushing/invalidation</p>
<dl class="function">
<dt id="c.xclCopyBO">
XCL_DRIVER_DLLESPEC int <code class="descname">xclCopyBO</code><span class="sig-paren">(</span><a class="reference internal" href="#c.xclDeviceHandle" title="xclDeviceHandle">xclDeviceHandle</a><em>&nbsp;handle</em>, xclBufferHandle<em>&nbsp;dstBoHandle</em>, xclBufferHandle<em>&nbsp;srcBoHandle</em>, size_t<em>&nbsp;size</em>, size_t<em>&nbsp;dst_offset</em>, size_t<em>&nbsp;src_offset</em><span class="sig-paren">)</span><a class="headerlink" href="#c.xclCopyBO" title="Permalink to this definition">¶</a></dt>
<dd><p>Copy device buffer contents to another buffer</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">xclDeviceHandle</span> <span class="pre">handle</span></code></dt>
<dd>Device handle</dd>
<dt><code class="docutils literal notranslate"><span class="pre">xclBufferHandle</span> <span class="pre">dstBoHandle</span></code></dt>
<dd>Destination BO handle</dd>
<dt><code class="docutils literal notranslate"><span class="pre">xclBufferHandle</span> <span class="pre">srcBoHandle</span></code></dt>
<dd>Source BO handle</dd>
<dt><code class="docutils literal notranslate"><span class="pre">size_t</span> <span class="pre">size</span></code></dt>
<dd>Size of data to synchronize</dd>
<dt><code class="docutils literal notranslate"><span class="pre">size_t</span> <span class="pre">dst_offset</span></code></dt>
<dd>dst  Offset within the BO</dd>
<dt><code class="docutils literal notranslate"><span class="pre">size_t</span> <span class="pre">src_offset</span></code></dt>
<dd>src  Offset within the BO</dd>
</dl>
<p><strong>Return</strong></p>
<p>0 on success or standard errno</p>
<p>Copy from source buffer contents to destination buffer, can be
device to device or device to host.  Always perform WRITE to
achieve better performance, destination buffer can be on device or
host require DMA from device</p>
<dl class="function">
<dt id="c.xclExportBO">
XCL_DRIVER_DLLESPEC xclBufferExportHandle <code class="descname">xclExportBO</code><span class="sig-paren">(</span><a class="reference internal" href="#c.xclDeviceHandle" title="xclDeviceHandle">xclDeviceHandle</a><em>&nbsp;handle</em>, xclBufferHandle<em>&nbsp;boHandle</em><span class="sig-paren">)</span><a class="headerlink" href="#c.xclExportBO" title="Permalink to this definition">¶</a></dt>
<dd><p>Obtain DMA-BUF file descriptor for a BO</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">xclDeviceHandle</span> <span class="pre">handle</span></code></dt>
<dd>Device handle</dd>
<dt><code class="docutils literal notranslate"><span class="pre">xclBufferHandle</span> <span class="pre">boHandle</span></code></dt>
<dd>BO handle which needs to be exported</dd>
</dl>
<p><strong>Return</strong></p>
<p>File handle to the BO or standard errno</p>
<p>Export a BO for import into another device or Linux subsystem which
accepts DMA-BUF fd This operation is backed by Linux DMA-BUF
framework</p>
<dl class="function">
<dt id="c.xclImportBO">
XCL_DRIVER_DLLESPEC xclBufferHandle <code class="descname">xclImportBO</code><span class="sig-paren">(</span><a class="reference internal" href="#c.xclDeviceHandle" title="xclDeviceHandle">xclDeviceHandle</a><em>&nbsp;handle</em>, xclBufferExportHandle<em>&nbsp;fd</em>, unsigned int<em>&nbsp;flags</em><span class="sig-paren">)</span><a class="headerlink" href="#c.xclImportBO" title="Permalink to this definition">¶</a></dt>
<dd><p>Obtain BO handle for a BO represented by DMA-BUF file descriptor</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">xclDeviceHandle</span> <span class="pre">handle</span></code></dt>
<dd>Device handle</dd>
<dt><code class="docutils literal notranslate"><span class="pre">xclBufferExportHandle</span> <span class="pre">fd</span></code></dt>
<dd>File handle to foreign BO owned by another device which needs to be imported</dd>
<dt><code class="docutils literal notranslate"><span class="pre">unsigned</span> <span class="pre">int</span> <span class="pre">flags</span></code></dt>
<dd>Unused</dd>
</dl>
<p><strong>Return</strong></p>
<p>BO handle of the imported BO</p>
<p>Import a BO exported by another device.     *
This operation is backed by Linux DMA-BUF framework</p>
<dl class="function">
<dt id="c.xclGetBOProperties">
XCL_DRIVER_DLLESPEC int <code class="descname">xclGetBOProperties</code><span class="sig-paren">(</span><a class="reference internal" href="#c.xclDeviceHandle" title="xclDeviceHandle">xclDeviceHandle</a><em>&nbsp;handle</em>, xclBufferHandle<em>&nbsp;boHandle</em>, struct xclBOProperties *<em>&nbsp;properties</em><span class="sig-paren">)</span><a class="headerlink" href="#c.xclGetBOProperties" title="Permalink to this definition">¶</a></dt>
<dd><p>Obtain xclBOProperties struct for a BO</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">xclDeviceHandle</span> <span class="pre">handle</span></code></dt>
<dd>Device handle</dd>
<dt><code class="docutils literal notranslate"><span class="pre">xclBufferHandle</span> <span class="pre">boHandle</span></code></dt>
<dd>BO handle</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">xclBOProperties</span> <span class="pre">*</span> <span class="pre">properties</span></code></dt>
<dd>BO properties struct pointer</dd>
</dl>
<p><strong>Return</strong></p>
<p>0 on success</p>
<p>This is the prefered method for obtaining BO property information.</p>
<p><strong>XRT Unmanaged DMA APIs</strong></p>
<hr class="docutils" />
<p>Unmanaged DMA APIs are for exclusive use by the debuggers and
tools. The APIs allow clinets to read/write from/to absolute device
address. No checks are performed if a buffer was allocated before
at the specified location or if the address is valid. Users who
want to take over the full memory managemnt of the device may use
this API to synchronize their buffers between host and device.</p>
<dl class="function">
<dt id="c.xclUnmgdPread">
XCL_DRIVER_DLLESPEC ssize_t <code class="descname">xclUnmgdPread</code><span class="sig-paren">(</span><a class="reference internal" href="#c.xclDeviceHandle" title="xclDeviceHandle">xclDeviceHandle</a><em>&nbsp;handle</em>, unsigned int<em>&nbsp;flags</em>, void *<em>&nbsp;buf</em>, size_t<em>&nbsp;size</em>, uint64_t<em>&nbsp;offset</em><span class="sig-paren">)</span><a class="headerlink" href="#c.xclUnmgdPread" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform unmanaged device memory read operation</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">xclDeviceHandle</span> <span class="pre">handle</span></code></dt>
<dd>Device handle</dd>
<dt><code class="docutils literal notranslate"><span class="pre">unsigned</span> <span class="pre">int</span> <span class="pre">flags</span></code></dt>
<dd>Unused</dd>
<dt><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">*</span> <span class="pre">buf</span></code></dt>
<dd>Destination data pointer</dd>
<dt><code class="docutils literal notranslate"><span class="pre">size_t</span> <span class="pre">size</span></code></dt>
<dd>Size of data to copy</dd>
<dt><code class="docutils literal notranslate"><span class="pre">uint64_t</span> <span class="pre">offset</span></code></dt>
<dd>Absolute offset inside device</dd>
</dl>
<p><strong>Return</strong></p>
<p>0 on success or appropriate error number</p>
<p>This API may be used to perform DMA operation from absolute
location specified. Users may use this if they want to perform
their own device memory management – not using the buffer object
(BO) framework defined before.</p>
<dl class="function">
<dt id="c.xclUnmgdPwrite">
XCL_DRIVER_DLLESPEC ssize_t <code class="descname">xclUnmgdPwrite</code><span class="sig-paren">(</span><a class="reference internal" href="#c.xclDeviceHandle" title="xclDeviceHandle">xclDeviceHandle</a><em>&nbsp;handle</em>, unsigned int<em>&nbsp;flags</em>, const void *<em>&nbsp;buf</em>, size_t<em>&nbsp;size</em>, uint64_t<em>&nbsp;offset</em><span class="sig-paren">)</span><a class="headerlink" href="#c.xclUnmgdPwrite" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform unmanaged device memory read operation</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">xclDeviceHandle</span> <span class="pre">handle</span></code></dt>
<dd>Device handle</dd>
<dt><code class="docutils literal notranslate"><span class="pre">unsigned</span> <span class="pre">int</span> <span class="pre">flags</span></code></dt>
<dd>Unused</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">void</span> <span class="pre">*</span> <span class="pre">buf</span></code></dt>
<dd>Source data pointer</dd>
<dt><code class="docutils literal notranslate"><span class="pre">size_t</span> <span class="pre">size</span></code></dt>
<dd>Size of data to copy</dd>
<dt><code class="docutils literal notranslate"><span class="pre">uint64_t</span> <span class="pre">offset</span></code></dt>
<dd>Absolute offset inside device</dd>
</dl>
<p><strong>Return</strong></p>
<p>0 on success or appropriate error number</p>
<p>This API may be used to perform DMA operation to an absolute
location specified. Users may use this if they want to perform
their own device memory management – not using the buffer object
(BO) framework defined before.</p>
<p><strong>XRT Compute Unit Execution Management APIs</strong></p>
<p>These APIs are under development. These functions will be used to
start compute units and wait for them to finish.</p>
<dl class="function">
<dt id="c.xclExecBuf">
XCL_DRIVER_DLLESPEC int <code class="descname">xclExecBuf</code><span class="sig-paren">(</span><a class="reference internal" href="#c.xclDeviceHandle" title="xclDeviceHandle">xclDeviceHandle</a><em>&nbsp;handle</em>, xclBufferHandle<em>&nbsp;cmdBO</em><span class="sig-paren">)</span><a class="headerlink" href="#c.xclExecBuf" title="Permalink to this definition">¶</a></dt>
<dd><p>Submit an execution request to the embedded (or software) scheduler</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">xclDeviceHandle</span> <span class="pre">handle</span></code></dt>
<dd>Device handle</dd>
<dt><code class="docutils literal notranslate"><span class="pre">xclBufferHandle</span> <span class="pre">cmdBO</span></code></dt>
<dd>BO handle containing command packet</dd>
</dl>
<p><strong>Return</strong></p>
<p>0 or standard error number</p>
<p>Submit an exec buffer for execution. The exec buffer layout is
defined by struct ert_packet which is defined in file <em>ert.h</em>. The
BO should been allocated with DRM_XOCL_BO_EXECBUF flag.</p>
<dl class="function">
<dt id="c.xclExecBufWithWaitList">
XCL_DRIVER_DLLESPEC int <code class="descname">xclExecBufWithWaitList</code><span class="sig-paren">(</span><a class="reference internal" href="#c.xclDeviceHandle" title="xclDeviceHandle">xclDeviceHandle</a><em>&nbsp;handle</em>, xclBufferHandle<em>&nbsp;cmdBO</em>, size_t<em>&nbsp;num_bo_in_wait_list</em>, xclBufferHandle *<em>&nbsp;bo_wait_list</em><span class="sig-paren">)</span><a class="headerlink" href="#c.xclExecBufWithWaitList" title="Permalink to this definition">¶</a></dt>
<dd><p>Submit an execution request to the embedded (or software) scheduler</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">xclDeviceHandle</span> <span class="pre">handle</span></code></dt>
<dd>Device handle</dd>
<dt><code class="docutils literal notranslate"><span class="pre">xclBufferHandle</span> <span class="pre">cmdBO</span></code></dt>
<dd>BO handle containing command packet</dd>
<dt><code class="docutils literal notranslate"><span class="pre">size_t</span> <span class="pre">num_bo_in_wait_list</span></code></dt>
<dd>Number of BO handles in wait list</dd>
<dt><code class="docutils literal notranslate"><span class="pre">xclBufferHandle</span> <span class="pre">*</span> <span class="pre">bo_wait_list</span></code></dt>
<dd>BO handles that must complete execution before cmdBO is started</dd>
</dl>
<p><strong>Return</strong></p>
<p>0 or standard error number</p>
<p>Submit an exec buffer for execution. The BO handles in the wait
list must complete execution before cmdBO is started.  The BO
handles in the wait list must have beeen submitted prior to this
call to xclExecBufWithWaitList.</p>
<dl class="function">
<dt id="c.xclExecWait">
XCL_DRIVER_DLLESPEC int <code class="descname">xclExecWait</code><span class="sig-paren">(</span><a class="reference internal" href="#c.xclDeviceHandle" title="xclDeviceHandle">xclDeviceHandle</a><em>&nbsp;handle</em>, int<em>&nbsp;timeoutMilliSec</em><span class="sig-paren">)</span><a class="headerlink" href="#c.xclExecWait" title="Permalink to this definition">¶</a></dt>
<dd><p>Wait for one or more execution events on the device</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">xclDeviceHandle</span> <span class="pre">handle</span></code></dt>
<dd>Device handle</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">timeoutMilliSec</span></code></dt>
<dd>How long to wait for</dd>
</dl>
<p><strong>Return</strong></p>
<p>Same code as poll system call</p>
<p>Wait for notification from the hardware. The function essentially
calls “poll” system call on the driver file handle. The return
value has same semantics as poll system call.  If return value is &gt;
0 caller should check the status of submitted exec buffers Note
that if you perform wait for the same handle from multiple threads,
you may lose wakeup for some of them. So, use different handle in
different threads.</p>
<p><strong>XRT Stream Queue APIs</strong></p>
<p>These functions are used for next generation DMA Engine, QDMA. QDMA
provides not only memory mapped DMA which moves data between host
memory and board memory, but also stream DMA which moves data
between host memory and kernel directly. XDMA memory mapped DMA
APIs are also supported on QDMA. New stream APIs are provided here
for preview and may be revised in a future release. These can only
be used with platforms with QDMA engine under the hood. The higher
level OpenCL based streaming APIs offer more refined interfaces and
compatibility between releases and each stream maps to a QDMA queue
underneath.</p>
<dl class="function">
<dt id="c.xclCreateWriteQueue">
XCL_DRIVER_DLLESPEC int <code class="descname">xclCreateWriteQueue</code><span class="sig-paren">(</span><a class="reference internal" href="#c.xclDeviceHandle" title="xclDeviceHandle">xclDeviceHandle</a><em>&nbsp;handle</em>, struct xclQueueContext *<em>&nbsp;q_ctx</em>, uint64_t *<em>&nbsp;q_hdl</em><span class="sig-paren">)</span><a class="headerlink" href="#c.xclCreateWriteQueue" title="Permalink to this definition">¶</a></dt>
<dd><p>Create Write Queue</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">xclDeviceHandle</span> <span class="pre">handle</span></code></dt>
<dd>Device handle</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">xclQueueContext</span> <span class="pre">*</span> <span class="pre">q_ctx</span></code></dt>
<dd>Queue Context</dd>
<dt><code class="docutils literal notranslate"><span class="pre">uint64_t</span> <span class="pre">*</span> <span class="pre">q_hdl</span></code></dt>
<dd>Queue handle</dd>
</dl>
<p><strong>Return</strong></p>
<p>0 or appropriate error number</p>
<p>Create write queue based on information provided in Queue
context. Queue handle is generated if creation successes.</p>
<dl class="function">
<dt id="c.xclCreateReadQueue">
XCL_DRIVER_DLLESPEC int <code class="descname">xclCreateReadQueue</code><span class="sig-paren">(</span><a class="reference internal" href="#c.xclDeviceHandle" title="xclDeviceHandle">xclDeviceHandle</a><em>&nbsp;handle</em>, struct xclQueueContext *<em>&nbsp;q_ctx</em>, uint64_t *<em>&nbsp;q_hdl</em><span class="sig-paren">)</span><a class="headerlink" href="#c.xclCreateReadQueue" title="Permalink to this definition">¶</a></dt>
<dd><p>Create Read Queue</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">xclDeviceHandle</span> <span class="pre">handle</span></code></dt>
<dd>Device handle</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">xclQueueContext</span> <span class="pre">*</span> <span class="pre">q_ctx</span></code></dt>
<dd>Queue Context</dd>
<dt><code class="docutils literal notranslate"><span class="pre">uint64_t</span> <span class="pre">*</span> <span class="pre">q_hdl</span></code></dt>
<dd>Queue handle</dd>
</dl>
<p><strong>Return</strong></p>
<p>0 or appropriate error number</p>
<p>Create read queue based on information provided in Queue
context. Queue handle is generated if creation successes.</p>
<dl class="function">
<dt id="c.xclDestroyQueue">
XCL_DRIVER_DLLESPEC int <code class="descname">xclDestroyQueue</code><span class="sig-paren">(</span><a class="reference internal" href="#c.xclDeviceHandle" title="xclDeviceHandle">xclDeviceHandle</a><em>&nbsp;handle</em>, uint64_t<em>&nbsp;q_hdl</em><span class="sig-paren">)</span><a class="headerlink" href="#c.xclDestroyQueue" title="Permalink to this definition">¶</a></dt>
<dd><p>Destroy Queue</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">xclDeviceHandle</span> <span class="pre">handle</span></code></dt>
<dd>Device handle</dd>
<dt><code class="docutils literal notranslate"><span class="pre">uint64_t</span> <span class="pre">q_hdl</span></code></dt>
<dd>Queue handle</dd>
</dl>
<p><strong>Return</strong></p>
<p>0 or appropriate error number</p>
<p>Destroy read or write queue and release all queue resources.</p>
<dl class="function">
<dt id="c.xclAllocQDMABuf">
XCL_DRIVER_DLLESPEC void* <code class="descname">xclAllocQDMABuf</code><span class="sig-paren">(</span><a class="reference internal" href="#c.xclDeviceHandle" title="xclDeviceHandle">xclDeviceHandle</a><em>&nbsp;handle</em>, size_t<em>&nbsp;size</em>, uint64_t *<em>&nbsp;buf_hdl</em><span class="sig-paren">)</span><a class="headerlink" href="#c.xclAllocQDMABuf" title="Permalink to this definition">¶</a></dt>
<dd><p>Allocate DMA buffer</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">xclDeviceHandle</span> <span class="pre">handle</span></code></dt>
<dd>Device handle</dd>
<dt><code class="docutils literal notranslate"><span class="pre">size_t</span> <span class="pre">size</span></code></dt>
<dd>Buffer size</dd>
<dt><code class="docutils literal notranslate"><span class="pre">uint64_t</span> <span class="pre">*</span> <span class="pre">buf_hdl</span></code></dt>
<dd>Buffer handle</dd>
</dl>
<p><strong>Return</strong></p>
<p>0 or appropriate error number</p>
<p>Allocate DMA buffer which is used for queue read and write.</p>
<dl class="function">
<dt id="c.xclFreeQDMABuf">
XCL_DRIVER_DLLESPEC int <code class="descname">xclFreeQDMABuf</code><span class="sig-paren">(</span><a class="reference internal" href="#c.xclDeviceHandle" title="xclDeviceHandle">xclDeviceHandle</a><em>&nbsp;handle</em>, uint64_t<em>&nbsp;buf_hdl</em><span class="sig-paren">)</span><a class="headerlink" href="#c.xclFreeQDMABuf" title="Permalink to this definition">¶</a></dt>
<dd><p>Free DMA buffer</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">xclDeviceHandle</span> <span class="pre">handle</span></code></dt>
<dd>Device handle</dd>
<dt><code class="docutils literal notranslate"><span class="pre">uint64_t</span> <span class="pre">buf_hdl</span></code></dt>
<dd>Buffer handle</dd>
</dl>
<p><strong>Return</strong></p>
<p>0 or appropriate error number</p>
<p>Free DMA buffer allocated by xclAllocQDMABuf.</p>
<dl class="function">
<dt id="c.xclWriteQueue">
XCL_DRIVER_DLLESPEC ssize_t <code class="descname">xclWriteQueue</code><span class="sig-paren">(</span><a class="reference internal" href="#c.xclDeviceHandle" title="xclDeviceHandle">xclDeviceHandle</a><em>&nbsp;handle</em>, uint64_t<em>&nbsp;q_hdl</em>, struct xclQueueRequest *<em>&nbsp;wr_req</em><span class="sig-paren">)</span><a class="headerlink" href="#c.xclWriteQueue" title="Permalink to this definition">¶</a></dt>
<dd><p>write data to queue</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">xclDeviceHandle</span> <span class="pre">handle</span></code></dt>
<dd>Device handle</dd>
<dt><code class="docutils literal notranslate"><span class="pre">uint64_t</span> <span class="pre">q_hdl</span></code></dt>
<dd>Queue handle</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">xclQueueRequest</span> <span class="pre">*</span> <span class="pre">wr_req</span></code></dt>
<dd>Queue request</dd>
</dl>
<p><strong>Return</strong></p>
<p>Number of bytes been written or appropriate error number</p>
<p>Move data from host memory to board. The destination is determined
by flow id and route id which are provided to
xclCreateWriteQueue. it returns number of bytes been moved or error
code.  By default, this function returns only when the entire buf
has been written, or error. If XCL_QUEUE_REQ_NONBLOCKING flag is
used, it returns immediately and xclPollCompletion needs to be used
to determine if the data transmission is completed.  If
XCL_QUEUE_REQ_EOT flag is used, end of transmit signal will be
added at the end of this tranmission.</p>
<dl class="function">
<dt id="c.xclReadQueue">
XCL_DRIVER_DLLESPEC ssize_t <code class="descname">xclReadQueue</code><span class="sig-paren">(</span><a class="reference internal" href="#c.xclDeviceHandle" title="xclDeviceHandle">xclDeviceHandle</a><em>&nbsp;handle</em>, uint64_t<em>&nbsp;q_hdl</em>, struct xclQueueRequest *<em>&nbsp;rd_req</em><span class="sig-paren">)</span><a class="headerlink" href="#c.xclReadQueue" title="Permalink to this definition">¶</a></dt>
<dd><p>read data from queue</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">xclDeviceHandle</span> <span class="pre">handle</span></code></dt>
<dd>Device handle</dd>
<dt><code class="docutils literal notranslate"><span class="pre">uint64_t</span> <span class="pre">q_hdl</span></code></dt>
<dd>Queue handle</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">xclQueueRequest</span> <span class="pre">*</span> <span class="pre">rd_req</span></code></dt>
<dd>read request</dd>
</dl>
<p><strong>Return</strong></p>
<p>Number of bytes been read or appropriate error number</p>
<p>Move data from board to host memory. The source is determined by
flow id and route id which are provided to xclCreateReadQueue. It
returns number of bytes been moved or error code.  This function
returns until all the requested bytes is read or error happens. If
XCL_QUEUE_REQ_NONBLOCKING flag is used, it returns immediately and
xclPollCompletion needs to be used to determine if the data
trasmission is completed.  If XCL_QUEUE_REQ_EOT flag is used, data
transmission for the current read request completes immediatly once
end of transmit signal is received.</p>
<dl class="function">
<dt id="c.xclPollQueue">
XCL_DRIVER_DLLESPEC int <code class="descname">xclPollQueue</code><span class="sig-paren">(</span><a class="reference internal" href="#c.xclDeviceHandle" title="xclDeviceHandle">xclDeviceHandle</a><em>&nbsp;handle</em>, uint64_t<em>&nbsp;q_hdl</em>, int<em>&nbsp;min_compl</em>, int<em>&nbsp;max_compl</em>, struct xclReqCompletion *<em>&nbsp;comps</em>, int *<em>&nbsp;actual_compl</em>, int<em>&nbsp;timeout</em><span class="sig-paren">)</span><a class="headerlink" href="#c.xclPollQueue" title="Permalink to this definition">¶</a></dt>
<dd><p>poll a single read/write queue completion</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">xclDeviceHandle</span> <span class="pre">handle</span></code></dt>
<dd>Device handle</dd>
<dt><code class="docutils literal notranslate"><span class="pre">uint64_t</span> <span class="pre">q_hdl</span></code></dt>
<dd>Queue handle</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">min_compl</span></code></dt>
<dd>Unblock only when receiving min_compl completions</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">max_compl</span></code></dt>
<dd>Max number of completion with one poll</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">xclReqCompletion</span> <span class="pre">*</span> <span class="pre">comps</span></code></dt>
<dd>Completed request array</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">*</span> <span class="pre">actual_compl</span></code></dt>
<dd>Number of requests been completed</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">timeout</span></code></dt>
<dd>Timeout</dd>
</dl>
<p><strong>Return</strong></p>
<p>Number of events or appropriate error number</p>
<p>Poll completion events of non-blocking read/write requests. Once
this function returns, an array of completed requests is returned.</p>
<dl class="function">
<dt id="c.xclSetQueueOpt">
XCL_DRIVER_DLLESPEC int <code class="descname">xclSetQueueOpt</code><span class="sig-paren">(</span><a class="reference internal" href="#c.xclDeviceHandle" title="xclDeviceHandle">xclDeviceHandle</a><em>&nbsp;handle</em>, uint64_t<em>&nbsp;q_hdl</em>, int<em>&nbsp;type</em>, uint32_t<em>&nbsp;val</em><span class="sig-paren">)</span><a class="headerlink" href="#c.xclSetQueueOpt" title="Permalink to this definition">¶</a></dt>
<dd><p>Set a single read/write queue’s option</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">xclDeviceHandle</span> <span class="pre">handle</span></code></dt>
<dd>Device handle</dd>
<dt><code class="docutils literal notranslate"><span class="pre">uint64_t</span> <span class="pre">q_hdl</span></code></dt>
<dd>Queue handle</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">type</span></code></dt>
<dd>option type</dd>
<dt><code class="docutils literal notranslate"><span class="pre">uint32_t</span> <span class="pre">val</span></code></dt>
<dd>option value</dd>
</dl>
<p><strong>Return</strong></p>
<p>Number of events or appropriate error number</p>
<p>Set option of a read or write queue.</p>
<dl class="function">
<dt id="c.xclPollCompletion">
XCL_DRIVER_DLLESPEC int <code class="descname">xclPollCompletion</code><span class="sig-paren">(</span><a class="reference internal" href="#c.xclDeviceHandle" title="xclDeviceHandle">xclDeviceHandle</a><em>&nbsp;handle</em>, int<em>&nbsp;min_compl</em>, int<em>&nbsp;max_compl</em>, struct xclReqCompletion *<em>&nbsp;comps</em>, int *<em>&nbsp;actual_compl</em>, int<em>&nbsp;timeout</em><span class="sig-paren">)</span><a class="headerlink" href="#c.xclPollCompletion" title="Permalink to this definition">¶</a></dt>
<dd><p>poll read/write queue completion</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">xclDeviceHandle</span> <span class="pre">handle</span></code></dt>
<dd>Device handle</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">min_compl</span></code></dt>
<dd>Unblock only when receiving min_compl completions</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">max_compl</span></code></dt>
<dd>Max number of completion with one poll</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">xclReqCompletion</span> <span class="pre">*</span> <span class="pre">comps</span></code></dt>
<dd>Completed request array</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">*</span> <span class="pre">actual_compl</span></code></dt>
<dd>Number of requests been completed</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">timeout</span></code></dt>
<dd>Timeout</dd>
</dl>
<p><strong>Return</strong></p>
<p>Number of events or appropriate error number</p>
<p>Poll completion events of non-blocking read/write requests. Once
this function returns, an array of completed requests is returned.</p>
</div>


           </div>
          </div>
          
                  <style>
                        .footer {
                        position: fixed;
                        left: 0;
                        bottom: 0;
                        width: 100%;
                        }
                  </style>
				  
				  <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="formats.html" class="btn btn-neutral float-left" title="Binary Formats" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="ert.main.html" class="btn btn-neutral float-right" title="Embedded Runtime Library" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021-2022, Xilinx, Inc. Xilinx is now a part of AMD.
      <span class="lastupdated">Last updated on July 20, 2022.
      </span></p>
  </div>



										<div class="aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid sub-footer">

													                    <div class="row">
                        <div class="col-xs-24">
                          <p><a target="_blank" href="https://www.amd.com/en/corporate/copyright">Terms and Conditions</a> | <a target="_blank" href="https://www.amd.com/en/corporate/privacy">Privacy</a> | <a target="_blank" href="https://www.amd.com/en/corporate/cookies">Cookie Policy</a> | <a target="_blank" href="https://www.amd.com/en/corporate/trademarks">Trademarks</a> | <a target="_blank" href="https://www.amd.com/system/files/documents/statement-human-trafficking-forced-labor.pdf">Statement on Forced Labor</a> | <a target="_blank" href="https://www.amd.com/en/corporate/competition">Fair and Open Competition</a> | <a target="_blank" href="https://www.amd.com/system/files/documents/amd-uk-tax-strategy.pdf">UK Tax Strategy</a> | <a target="_blank" href="https://docs.xilinx.com/v/u/9x6YvZKuWyhJId7y7RQQKA">Inclusive Terminology</a> | <a href="https://pages.gitenterprise.xilinx.com/techdocs/Test/vvas/build/html/index.html#cookiessettings" class="ot-sdk-show-settings">Cookies Settings</a></p>
                        </div>
                    </div>
												</div>
											</div>
										</div>
										
</br>


  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>


</body>
</html>